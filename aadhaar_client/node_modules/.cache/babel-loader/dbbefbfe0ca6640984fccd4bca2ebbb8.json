{"ast":null,"code":"var _jsxFileName = \"/home/noel/Desktop/aadhar_app/login-page/src/components/Protectedroutes.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState } from \"react\";\nimport { Route, useHistory } from \"react-router-dom\";\nimport Auth from \"./auth\";\nimport Login from \"./Login\";\nimport axios from \"axios\";\nimport auth from \"./auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Protectedroutes = ({\n  component: Component,\n  ...rest\n}) => {\n  _s();\n\n  let [loading, setloading] = useState(false);\n  let history = useHistory();\n  useEffect(() => {\n    setloading(false); //while calling api setting loading state to false.\n\n    axios.get(`http://localhost:4444/otpauth/checkauth`, {\n      withCredentials: true,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    }).then(res => {\n      if (res.data !== \"notloggedin\") {\n        //checking if user is logged in\n        console.log(res.data);\n        Auth.login(); //changing is authenticated to true after checking if the user is legitimate.\n      } else {\n        auth.logout();\n        history.push('/login'); //  window.location.reload(); //if the user is not legitimate we will change the is authenticates attribute to false.\n      }\n\n      setloading(true);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n    render: props => {\n      if (Auth.isAuthenticated()) {\n        return loading && /*#__PURE__*/_jsxDEV(Component, { ...props\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 29\n        }, this);\n      } else {\n        return loading && /*#__PURE__*/_jsxDEV(Login, { ...props\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 29\n        }, this);\n      }\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Protectedroutes, \"l6ac0juyvf0XxUe5j5B9BfkJD4c=\", false, function () {\n  return [useHistory];\n});\n\n_c = Protectedroutes;\nexport default Protectedroutes; // if(rest.path==='/Login' || Auth.isAuthenticated===false){\n//     return\n//     loading && <Route {...rest} render={(props)=>{\n//         return\n//             <Redirect to={\n//                 {\n//                     pathname:\"/Login\",\n//                     state : {from :props.location }\n//                 }\n//             }\n//             />\n//         }\n//     }\n//     />\n// }\n\nvar _c;\n\n$RefreshReg$(_c, \"Protectedroutes\");","map":{"version":3,"sources":["/home/noel/Desktop/aadhar_app/login-page/src/components/Protectedroutes.js"],"names":["React","useEffect","useState","Route","useHistory","Auth","Login","axios","auth","Protectedroutes","component","Component","rest","loading","setloading","history","get","withCredentials","headers","Authorization","localStorage","getItem","Accept","then","res","data","console","log","login","logout","push","props","isAuthenticated"],"mappings":";;;AAAA,SAASA,KAAT,EAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,KAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;;;AAEA,MAAMC,eAAe,GAAG,CAAC;AAAEC,EAAAA,SAAS,EAAEC,SAAb;AAAwB,KAAGC;AAA3B,CAAD,KAAuC;AAAA;;AAC7D,MAAI,CAACC,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,KAAD,CAApC;AACA,MAAIa,OAAO,GAACX,UAAU,EAAtB;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACda,IAAAA,UAAU,CAAC,KAAD,CAAV,CADc,CACK;;AACnBP,IAAAA,KAAK,CACFS,GADH,CACQ,yCADR,EACkD;AAC9CC,MAAAA,eAAe,EAAE,IAD6B;AAE9CC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADpB;AAEPC,QAAAA,MAAM,EAAE,kBAFD;AAGP,wBAAgB,kBAHT;AAIP,4CAAoC;AAJ7B;AAFqC,KADlD,EAUGC,IAVH,CAUSC,GAAD,IAAS;AACb,UAAIA,GAAG,CAACC,IAAJ,KAAa,aAAjB,EAAgC;AAC9B;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACC,IAAhB;AACApB,QAAAA,IAAI,CAACuB,KAAL,GAH8B,CAGhB;AACf,OAJD,MAIO;AACLpB,QAAAA,IAAI,CAACqB,MAAL;AACAd,QAAAA,OAAO,CAACe,IAAR,CAAa,QAAb,EAFK,CAGL;AACD;;AACDhB,MAAAA,UAAU,CAAC,IAAD,CAAV;AACD,KArBH;AAsBD,GAxBQ,EAwBN,EAxBM,CAAT;AA0BA,sBACE,QAAC,KAAD,OACMF,IADN;AAEE,IAAA,MAAM,EAAGmB,KAAD,IAAW;AACjB,UAAI1B,IAAI,CAAC2B,eAAL,EAAJ,EAA4B;AAC1B,eAAOnB,OAAO,iBAAI,QAAC,SAAD,OAAekB;AAAf;AAAA;AAAA;AAAA;AAAA,gBAAlB;AACD,OAFD,MAEO;AACL,eAAOlB,OAAO,iBAAI,QAAC,KAAD,OAAWkB;AAAX;AAAA;AAAA;AAAA;AAAA,gBAAlB;AACD;AACF;AARH;AAAA;AAAA;AAAA;AAAA,UADF;AAYD,CA1CD;;GAAMtB,e;UAEQL,U;;;KAFRK,e;AA4CN,eAAeA,eAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["import { React, useEffect, useState } from \"react\";\nimport { Route,useHistory } from \"react-router-dom\";\nimport Auth from \"./auth\";\nimport Login from \"./Login\";\nimport axios from \"axios\";\nimport auth from \"./auth\";\n\nconst Protectedroutes = ({ component: Component, ...rest }) => {\n  let [loading, setloading] = useState(false);\n  let history=useHistory();\n\n  useEffect(() => {\n    setloading(false); //while calling api setting loading state to false.\n    axios\n      .get(`http://localhost:4444/otpauth/checkauth`, {\n        withCredentials: true,\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Credentials\": true,\n        },\n      })\n      .then((res) => {\n        if (res.data !== \"notloggedin\") {\n          //checking if user is logged in\n          console.log(res.data);\n          Auth.login(); //changing is authenticated to true after checking if the user is legitimate.\n        } else {\n          auth.logout();\n          history.push('/login')\n          //  window.location.reload(); //if the user is not legitimate we will change the is authenticates attribute to false.\n        }\n        setloading(true);\n      });\n  }, []);\n\n  return (\n    <Route\n      {...rest}\n      render={(props) => {\n        if (Auth.isAuthenticated()) {\n          return loading && <Component {...props} />;\n        } else {\n          return loading && <Login {...props} />;\n        }\n      }}\n    />\n  );\n};\n\nexport default Protectedroutes;\n\n// if(rest.path==='/Login' || Auth.isAuthenticated===false){\n//     return\n//     loading && <Route {...rest} render={(props)=>{\n//         return\n//             <Redirect to={\n//                 {\n//                     pathname:\"/Login\",\n//                     state : {from :props.location }\n//                 }\n//             }\n//             />\n//         }\n//     }\n//     />\n\n// }\n"]},"metadata":{},"sourceType":"module"}