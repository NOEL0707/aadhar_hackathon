{"ast":null,"code":"var _jsxFileName = \"/home/noel/Desktop/aadhar_app/login-page/src/components/Ekycform.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"../styles/ekyc.css\"; // import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import { faSync } from \"@fortawesome/free-solid-svg-icons\";\n\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ntoast.configure();\n\nconst Ekycform = () => {\n  _s();\n\n  let [aadharuid, setAadharuid] = useState(\"\");\n  let [captchaValue, setcaptchaValue] = useState(\"\");\n  let [checkBox, setCheckBox] = useState(false);\n  let [otpvalue, setotpvalue] = useState(\"\");\n  let [txnid, settxnid] = useState(\"\");\n  let history = useHistory();\n\n  function aadharNoCheck() {\n    var d = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 0, 6, 7, 8, 9, 5], [2, 3, 4, 0, 1, 7, 8, 9, 5, 6], [3, 4, 0, 1, 2, 8, 9, 5, 6, 7], [4, 0, 1, 2, 3, 9, 5, 6, 7, 8], [5, 9, 8, 7, 6, 0, 4, 3, 2, 1], [6, 5, 9, 8, 7, 1, 0, 4, 3, 2], [7, 6, 5, 9, 8, 2, 1, 0, 4, 3], [8, 7, 6, 5, 9, 3, 2, 1, 0, 4], [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]];\n    var p = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 5, 7, 6, 2, 8, 3, 0, 9, 4], [5, 8, 0, 3, 7, 9, 6, 1, 4, 2], [8, 9, 1, 6, 0, 4, 3, 5, 2, 7], [9, 4, 5, 3, 1, 2, 6, 8, 7, 0], [4, 2, 8, 6, 5, 7, 3, 9, 0, 1], [2, 7, 9, 3, 8, 0, 6, 4, 1, 5], [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]]; // console.log(aadharuid);\n\n    var uidNumber = Number(aadharuid);\n\n    if (isNaN(uidNumber)) {\n      return false;\n    }\n\n    var c = 0;\n    var invertedArray = uidNumber.toString().split(\"\").map(Number).reverse();\n\n    for (var i = 0; i < invertedArray.length; i++) {\n      c = d[c][p[i % 8][invertedArray[i]]];\n    }\n\n    return c === 0 && aadharuid.length === 12;\n  }\n\n  function getOTP() {\n    if (!aadharNoCheck()) {\n      alert(\"Invalid Aaadhar Number\");\n      return;\n    } else if (checkBox === false) {\n      alert(\"Please provide your consent\");\n      return;\n    } else {\n      document.getElementById(\"otpb\").disabled = true; //make a api request here\n\n      axios.post(\"http://localhost:4444/ekyc/otp\", {\n        aadharid: aadharuid,\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      }, {\n        headers: {\n          \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Credentials\": true\n        }\n      }).then(res => {\n        if (res.data.stat === 200) {\n          toast.success(res.data.res);\n          let x = document.getElementsByClassName(\"otpcontainer\");\n          x[0].style.display = \"flex\";\n          settxnid(res.data.txnID);\n        } else {\n          toast.error(res.data.res);\n          document.getElementById(\"otpb\").disabled = false;\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }\n\n  function authOTP() {\n    axios.post(\"http://localhost:4444/ekyc/login\", {\n      aadharid: aadharuid,\n      txnid: txnid,\n      otp: otpvalue\n    }, {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    }).then(res => {\n      if (res.data.s === \"y\") {\n        console.log(\"succes\");\n        toast.success(\"Logged in succesfully!\");\n        localStorage.setItem(\"jwt\", res.data.t);\n        history.push(\"/home\");\n      } else {\n        toast.error(\"error!\");\n        document.getElementById(\"otpb\").disabled = false;\n        let x = document.getElementsByClassName(\"otpcontainer\");\n        x[0].style.display = \"none\";\n      }\n    }).catch(error => {});\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"containere\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logincontainere\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://uidai.gov.in/images/logo/aadhaar_english_logo.svg\",\n          alt: \"Aadhaar Logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            textAlign: \"center\",\n            fontSize: \"large\",\n            color: \"red\"\n          },\n          children: \"Login Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inputName\",\n          children: \"Aadhar Number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"uidText\",\n          type: \"text\",\n          id: \"aadharNo\",\n          name: \"aadharNo\",\n          maxLength: \"12\",\n          value: aadharuid,\n          onChange: e => {\n            setAadharuid(e.target.value);\n          },\n          required: true,\n          placeholder: \"Enter Aaadhar Number or VID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"consentBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: \"20px\",\n            height: \"20px\",\n            alignSelf: \"center\",\n            marginLeft: \"25px\",\n            cursor: \"pointer\"\n          },\n          type: \"checkbox\",\n          id: \"vehicle1\",\n          name: \"vehicle1\",\n          value: \"Bike\",\n          onChange: e => {\n            setCheckBox(!checkBox);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: \"80%\"\n          },\n          children: \"Please provide consent for using Aadhaar OTP Authentication\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: () => {\n          getOTP();\n        },\n        className: \"otpbutton\",\n        id: \"otpb\",\n        children: \"Generate OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"otpcontainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inputName\",\n          style: {\n            marginLeft: \"25px\"\n          },\n          children: \"OTP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inputBox\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"captchaText\",\n            type: \"text\",\n            id: \"aadharNo\",\n            name: \"aadharNo\",\n            value: otpvalue,\n            onChange: e => setotpvalue(e.target.value),\n            required: true,\n            placeholder: \"Enter OTP \",\n            style: {\n              marginLeft: \"0px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          onClick: () => {\n            authOTP();\n          },\n          className: \"otpbutton\",\n          style: {\n            marginTop: \"45px\"\n          },\n          children: \"Send Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Ekycform, \"UjQsPQ16tSdd5M11mwcvRF9/4l4=\", false, function () {\n  return [useHistory];\n});\n\n_c = Ekycform;\nexport default Ekycform; //   axios(\n//     {\n//       method: \"post\",\n//       url: \"http://localhost:4444/ekyc/otp\",\n//       data: {\n//         aadharid: aadharuid,\n//         Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n//       },\n//     },\n//     {\n//       withCredentials: true,\n//       headers: {\n//         \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\n//         \"Accept\": \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//         \"Access-Control-Allow-Credentials\": true,\n//       },\n//     }\n//   ).then((res) => {\n//     console.log(res);\n//     if (res.data.stat === 200) {\n//       toast.success(res.data.res);\n//       let x = document.getElementsByClassName(\"otpcontainer\");\n//       x[0].style.display = \"flex\";\n//       settxnid(res.data.txnID);\n//     } else {\n//       toast.error(res.data.res);\n//       document.getElementById(\"otpb\").disabled = false;\n//     }\n//   });\n//   axios(\n//     {\n//       method: \"post\",\n//       url: \"http://localhost:4444/ekyc/login\",\n//       data: {\n//         aadharid: aadharuid,\n//         otp: otpvalue,\n//         txnid: txnid,\n//       },\n//     },\n//     {\n//       withCredentials: true,\n//       headers: {\n//         \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\n//         \"Accept\": \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//         \"Access-Control-Allow-Credentials\": true,\n//       },\n//     }\n//   ).then((res) => {\n//     console.log(res);\n//     if (res.data.s === \"y\") {\n//       console.log(\"succes\");\n//       toast.success(\"Logged in succesfully!\");\n//       localStorage.setItem(\"jwt\", res.data.t);\n//       history.push(\"/home\");\n//     } else {\n//       toast.error(\"error!\");\n//       document.getElementById(\"otpb\").disabled = false;\n//       let x = document.getElementsByClassName(\"otpcontainer\");\n//       x[0].style.display = \"none\";\n//     }\n//   });\n\nvar _c;\n\n$RefreshReg$(_c, \"Ekycform\");","map":{"version":3,"sources":["/home/noel/Desktop/aadhar_app/login-page/src/components/Ekycform.jsx"],"names":["React","useState","useEffect","useHistory","axios","toast","configure","Ekycform","aadharuid","setAadharuid","captchaValue","setcaptchaValue","checkBox","setCheckBox","otpvalue","setotpvalue","txnid","settxnid","history","aadharNoCheck","d","p","uidNumber","Number","isNaN","c","invertedArray","toString","split","map","reverse","i","length","getOTP","alert","document","getElementById","disabled","post","aadharid","Authorization","localStorage","getItem","headers","then","res","data","stat","success","x","getElementsByClassName","style","display","txnID","error","catch","console","log","authOTP","otp","s","setItem","t","push","textAlign","fontSize","color","e","target","value","width","height","alignSelf","marginLeft","cursor","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"../styles/ekyc.css\";\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import { faSync } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\ntoast.configure();\nconst Ekycform = () => {\n  let [aadharuid, setAadharuid] = useState(\"\");\n  let [captchaValue, setcaptchaValue] = useState(\"\");\n  let [checkBox, setCheckBox] = useState(false);\n  let [otpvalue, setotpvalue] = useState(\"\");\n  let [txnid, settxnid] = useState(\"\");\n  let history = useHistory();\n\n  function aadharNoCheck() {\n    var d = [\n      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      [1, 2, 3, 4, 0, 6, 7, 8, 9, 5],\n      [2, 3, 4, 0, 1, 7, 8, 9, 5, 6],\n      [3, 4, 0, 1, 2, 8, 9, 5, 6, 7],\n      [4, 0, 1, 2, 3, 9, 5, 6, 7, 8],\n      [5, 9, 8, 7, 6, 0, 4, 3, 2, 1],\n      [6, 5, 9, 8, 7, 1, 0, 4, 3, 2],\n      [7, 6, 5, 9, 8, 2, 1, 0, 4, 3],\n      [8, 7, 6, 5, 9, 3, 2, 1, 0, 4],\n      [9, 8, 7, 6, 5, 4, 3, 2, 1, 0],\n    ];\n    var p = [\n      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      [1, 5, 7, 6, 2, 8, 3, 0, 9, 4],\n      [5, 8, 0, 3, 7, 9, 6, 1, 4, 2],\n      [8, 9, 1, 6, 0, 4, 3, 5, 2, 7],\n      [9, 4, 5, 3, 1, 2, 6, 8, 7, 0],\n      [4, 2, 8, 6, 5, 7, 3, 9, 0, 1],\n      [2, 7, 9, 3, 8, 0, 6, 4, 1, 5],\n      [7, 0, 4, 6, 9, 1, 3, 2, 5, 8],\n    ];\n    // console.log(aadharuid);\n    var uidNumber = Number(aadharuid);\n    if (isNaN(uidNumber)) {\n      return false;\n    }\n    var c = 0;\n    var invertedArray = uidNumber.toString().split(\"\").map(Number).reverse();\n\n    for (var i = 0; i < invertedArray.length; i++) {\n      c = d[c][p[i % 8][invertedArray[i]]];\n    }\n\n    return c === 0 && aadharuid.length === 12;\n  }\n\n  function getOTP() {\n    if (!aadharNoCheck()) {\n      alert(\"Invalid Aaadhar Number\");\n      return;\n    } else if (checkBox === false) {\n      alert(\"Please provide your consent\");\n      return;\n    } else {\n      document.getElementById(\"otpb\").disabled = true;\n      //make a api request here\n          axios.post(\"http://localhost:4444/ekyc/otp\", {\n      aadharid: aadharuid,\n      Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n    }, {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true,\n      }\n  })\n  .then((res) => {\n      if (res.data.stat === 200) {\n        toast.success(res.data.res);\n        let x = document.getElementsByClassName(\"otpcontainer\");\n        x[0].style.display = \"flex\";\n        settxnid(res.data.txnID);\n      } else {\n        toast.error(res.data.res);\n        document.getElementById(\"otpb\").disabled = false;\n      }\n  })\n  .catch((error) => {\n    console.log(error);\n  })\n\n    }\n  }\n\n  function authOTP() {\n    axios.post(\"http://localhost:4444/ekyc/login\", {\n      aadharid: aadharuid,\n      txnid:txnid,\n      otp:otpvalue,\n    }, {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true,\n      }\n  })\n  .then((res) => {\n      if (res.data.s === \"y\") {\n        console.log(\"succes\");\n        toast.success(\"Logged in succesfully!\");\n        localStorage.setItem(\"jwt\", res.data.t);\n        history.push(\"/home\");\n      } else {\n        toast.error(\"error!\");\n        document.getElementById(\"otpb\").disabled = false;\n        let x = document.getElementsByClassName(\"otpcontainer\");\n        x[0].style.display = \"none\";\n      }\n  })\n  .catch((error) => {\n\n  })\n \n  }\n\n  return (\n    <div className=\"containere\">\n      <div className=\"logincontainere\">\n        <div className=\"header\">\n          <img\n            src=\"https://uidai.gov.in/images/logo/aadhaar_english_logo.svg\"\n            alt=\"Aadhaar Logo\"\n          />\n          <h4 style={{ textAlign: \"center\", fontSize: \"large\", color: \"red\" }}>\n            Login Page\n          </h4>\n        </div>\n        <div className=\"inputBox\">\n          <span className=\"inputName\">Aadhar Number</span>\n          <input\n            className=\"uidText\"\n            type=\"text\"\n            id=\"aadharNo\"\n            name=\"aadharNo\"\n            maxLength=\"12\"\n            value={aadharuid}\n            onChange={(e) => {\n              setAadharuid(e.target.value);\n            }}\n            required\n            placeholder=\"Enter Aaadhar Number or VID\"\n          />\n        </div>\n\n        <div className=\"consentBox\">\n          <input\n            style={{\n              width: \"20px\",\n              height: \"20px\",\n              alignSelf: \"center\",\n              marginLeft: \"25px\",\n              cursor: \"pointer\",\n            }}\n            type=\"checkbox\"\n            id=\"vehicle1\"\n            name=\"vehicle1\"\n            value=\"Bike\"\n            onChange={(e) => {\n              setCheckBox(!checkBox);\n            }}\n          />\n          <span style={{ width: \"80%\" }}>\n            Please provide consent for using Aadhaar OTP Authentication\n          </span>\n        </div>\n        <button\n          type=\"submit\"\n          onClick={() => {\n            getOTP();\n          }}\n          className=\"otpbutton\"\n          id=\"otpb\"\n        >\n          Generate OTP\n        </button>\n        <div className=\"otpcontainer\">\n          <span className=\"inputName\" style={{ marginLeft: \"25px\" }}>\n            OTP\n          </span>\n          <div className=\"inputBox\">\n            <input\n              className=\"captchaText\"\n              type=\"text\"\n              id=\"aadharNo\"\n              name=\"aadharNo\"\n              value={otpvalue}\n              onChange={(e) => setotpvalue(e.target.value)}\n              required\n              placeholder=\"Enter OTP \"\n              style={{ marginLeft: \"0px\" }}\n            />\n          </div>\n          <button\n            type=\"submit\"\n            onClick={() => {\n              authOTP();\n            }}\n            className=\"otpbutton\"\n            style={{ marginTop: \"45px\" }}\n          >\n            Send Address\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Ekycform;\n    //   axios(\n    //     {\n    //       method: \"post\",\n    //       url: \"http://localhost:4444/ekyc/otp\",\n    //       data: {\n    //         aadharid: aadharuid,\n    //         Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n    //       },\n    //     },\n    //     {\n    //       withCredentials: true,\n    //       headers: {\n    //         \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\n    //         \"Accept\": \"application/json\",\n    //         \"Content-Type\": \"application/json\",\n    //         \"Access-Control-Allow-Credentials\": true,\n    //       },\n    //     }\n    //   ).then((res) => {\n    //     console.log(res);\n\n    //     if (res.data.stat === 200) {\n    //       toast.success(res.data.res);\n    //       let x = document.getElementsByClassName(\"otpcontainer\");\n    //       x[0].style.display = \"flex\";\n    //       settxnid(res.data.txnID);\n    //     } else {\n    //       toast.error(res.data.res);\n    //       document.getElementById(\"otpb\").disabled = false;\n    //     }\n    //   });\n\n     //   axios(\n  //     {\n  //       method: \"post\",\n  //       url: \"http://localhost:4444/ekyc/login\",\n  //       data: {\n  //         aadharid: aadharuid,\n  //         otp: otpvalue,\n  //         txnid: txnid,\n  //       },\n  //     },\n  //     {\n  //       withCredentials: true,\n  //       headers: {\n  //         \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\n  //         \"Accept\": \"application/json\",\n  //         \"Content-Type\": \"application/json\",\n  //         \"Access-Control-Allow-Credentials\": true,\n  //       },\n  //     }\n  //   ).then((res) => {\n  //     console.log(res);\n  //     if (res.data.s === \"y\") {\n  //       console.log(\"succes\");\n  //       toast.success(\"Logged in succesfully!\");\n  //       localStorage.setItem(\"jwt\", res.data.t);\n  //       history.push(\"/home\");\n  //     } else {\n  //       toast.error(\"error!\");\n  //       document.getElementById(\"otpb\").disabled = false;\n  //       let x = document.getElementsByClassName(\"otpcontainer\");\n  //       x[0].style.display = \"none\";\n  //     }\n  //   });"]},"metadata":{},"sourceType":"module"}